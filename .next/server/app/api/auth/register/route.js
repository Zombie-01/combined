"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9269:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>S,originalPathname:()=>E,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>m});var s={};t.r(s),t.d(s,{POST:()=>u}),t(5655);var i=t(3323),a=t(4647),n=t(6886),o=t(3935);async function u(e){try{let r=await e.json(),{name:t,email:s,password:i}=r;if(!s||!i||!t)return new Response(JSON.stringify({error:"Missing fields"}),{status:400});if(!process.env.SUPABASE_SERVICE_ROLE_KEY)return new Response(JSON.stringify({error:"SUPABASE_SERVICE_ROLE_KEY is not configured on the server. Registration is disabled.",hint:"Set SUPABASE_SERVICE_ROLE_KEY in environment to enable server-side Supabase admin operations."}),{status:503});let a=await o.p.auth.admin.createUser({email:s,password:i,user_metadata:{name:t},email_confirm:!0});if(a.error)return new Response(JSON.stringify({error:a.error.message}),{status:400});let u=a.data.user;return u&&await o.p.from("users").insert({id:u.id,email:s,name:t,role:"user"}),n.Z.json({success:!0})}catch(e){return new Response(JSON.stringify({error:"Unexpected error"}),{status:500})}}let p=i.AppRouteRouteModule,d=new p({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"D:\\project\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:g,headerHooks:S,staticGenerationBailout:m}=d,E="/api/auth/register/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4871,4856,3935],()=>t(9269));module.exports=s})();