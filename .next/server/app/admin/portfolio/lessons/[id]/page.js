(()=>{var e={};e.id=8510,e.ids=[8510],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},1790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7022:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>u,routeModule:()=>x,tree:()=>c});var r=s(3137),i=s(4647),o=s(4183),n=s.n(o),a=s(1775),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);s.d(t,l);let d=r.AppPageRouteModule,c=["",{children:["admin",{children:["portfolio",{children:["lessons",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2786)),"D:\\project\\app\\admin\\portfolio\\lessons\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6441)),"D:\\project\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6781)),"D:\\project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1918,23)),"next/dist/client/components/not-found-error"]}],u=["D:\\project\\app\\admin\\portfolio\\lessons\\[id]\\page.tsx"],m="/admin/portfolio/lessons/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new d({definition:{kind:i.x.APP_PAGE,page:"/admin/portfolio/lessons/[id]/page",pathname:"/admin/portfolio/lessons/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2341:(e,t,s)=>{Promise.resolve().then(s.bind(s,6707))},6707:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(80),i=s(9885),o=s(7114),n=s(9424),a=s(8384),l=s(6466),d=s(3524),c=s(9941);function u({lesson:e}){let t=(0,o.useRouter)(),[s,u]=(0,i.useState)(e?.title??""),[m,p]=(0,i.useState)(e?.description??""),[x,f]=(0,i.useState)(e?.image_url??""),[h,g]=(0,i.useState)(e?.video_url??""),[b,v]=(0,i.useState)(!1),[j,y]=(0,i.useState)(null),_=async r=>{r.preventDefault(),y(null),v(!0);try{if(!s.trim()){y("Title is required"),c.Am.error("Title is required"),v(!1);return}let r=await fetch("/api/portfolio/lessons",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,title:s,description:m,image_url:x,video_url:h})});if(!r.ok){let e=await r.json().catch(()=>({})),t=e.error||"Failed to update lesson";y(t),c.Am.error(t),v(!1);return}c.Am.success("Lesson updated"),t.refresh()}catch(t){let e="An unexpected error occurred";y(e),c.Am.error(e)}finally{v(!1)}},P=async()=>{let s=confirm("Are you sure you want to delete this lesson?");if(s){v(!0);try{let s=await fetch("/api/portfolio/lessons",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})});if(!s.ok){let e=await s.json().catch(()=>({})),t=e.error||"Failed to delete lesson";c.Am.error(t),v(!1);return}c.Am.success("Lesson deleted"),t.push("/admin/portfolio/lessons")}catch(e){c.Am.error("An unexpected error occurred"),v(!1)}}};return r.jsx("form",{onSubmit:_,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),r.jsx(n.I,{value:s,onChange:e=>u(e.target.value),disabled:b})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),r.jsx(l.g,{value:m,onChange:e=>p(e.target.value),disabled:b,rows:6})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Image"}),r.jsx(d.U,{value:x??"",onChange:f,bucket:"images",onError:y}),x&&r.jsx("img",{src:x,alt:"lesson",className:"mt-2 max-h-48 rounded object-cover"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Video URL"}),r.jsx(n.I,{value:h??"",onChange:e=>g(e.target.value),disabled:b})]}),e.created_at&&(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleString()]}),j&&r.jsx("div",{className:"rounded-md bg-red-50 p-3 text-sm text-red-700",children:j}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(a.z,{type:"submit",disabled:b,className:"bg-blue-600 hover:bg-blue-700",children:b?"Saving...":"Save Changes"}),r.jsx(a.z,{type:"button",variant:"destructive",onClick:P,disabled:b,children:"Delete Lesson"})]})]})})}},9424:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(80),i=s(9885),o=s(3161);let n=i.forwardRef(({className:e,type:t,...s},i)=>r.jsx("input",{type:t,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...s}));n.displayName="Input"},2786:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(8144);s(3830);var i=s(5904),o=s(7536);let n=(0,o.createProxy)(String.raw`D:\project\components\admin\lesson-edit-form.tsx`),{__esModule:a,$$typeof:l}=n,d=n.default;var c=s(944);async function u({params:e}){let{id:t}=e,s=await (0,c.d7)(t);return(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Edit Lesson"}),(0,r.jsxs)(i.Zb,{children:[r.jsx(i.Ol,{children:(0,r.jsxs)(i.ll,{children:["Edit ",s?.title]})}),r.jsx(i.aY,{children:s?r.jsx(d,{lesson:s}):r.jsx("div",{children:"Lesson not found"})})]})]})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4871,3466,1440,6080,5496,648,3935,944,2501,8384,5734,5904,8193],()=>s(7022));module.exports=r})();