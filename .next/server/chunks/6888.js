exports.id=6888,exports.ids=[6888],exports.modules={8287:(e,t,r)=>{Promise.resolve().then(r.bind(r,6904))},9861:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9918,23)),Promise.resolve().then(r.t.bind(r,2057,23)),Promise.resolve().then(r.t.bind(r,6148,23)),Promise.resolve().then(r.t.bind(r,8359,23)),Promise.resolve().then(r.t.bind(r,1860,23)),Promise.resolve().then(r.t.bind(r,2427,23))},6904:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>l,useAuth:()=>o});var n=r(80),s=r(9885);let i=(0,s.createContext)(null);function l({children:e}){let[t,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(null),[a,u]=(0,s.useState)(!0),c=async()=>{try{let e=await fetch("/api/auth/session",{cache:"no-store"});if(!e.ok)return{session:null,profile:null};return await e.json()}catch(e){return{session:null,profile:null}}};(0,s.useEffect)(()=>{let e=!0,t=async()=>{let{session:t,profile:n}=await c();e&&(t?.user&&(r(t.user),o(n??null)),u(!1))};return t(),()=>{e=!1}},[]);let h=async(e,t)=>{try{let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!n.ok)return!1;let{session:s}=await n.json();if(s?.user){r(s.user);let e=await c();o(e.profile??null)}return!0}catch(e){return!1}},d=async(e,t,r)=>{try{let n=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:r})});if(!n.ok){let e=await n.json().catch(()=>({}));return{success:!1,error:e?.error}}return{success:!0}}catch(e){return{success:!1,error:"Unexpected error"}}},f=async()=>{try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){}r(null),o(null)};return n.jsx(i.Provider,{value:{user:t,profile:l,loading:a,login:h,register:d,logout:f},children:e})}let o=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be inside AuthProvider");return e}},5034:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(8144),s=r(7366),i=r.n(s);r(7272);var l=r(7536);let o=(0,l.createProxy)(String.raw`D:\project\lib\auth-context.tsx`),{__esModule:a,$$typeof:u}=o;o.default;let c=o.AuthProvider;function h({children:e}){return(0,n.jsxs)("html",{lang:"mn",children:[(0,n.jsxs)("head",{children:[n.jsx("link",{rel:"manifest",href:"/manifest.json"}),n.jsx("meta",{name:"theme-color",content:"#1f2937"}),n.jsx("link",{rel:"apple-touch-icon",href:"/icon-192x192.png"})]}),n.jsx("body",{className:i().className,children:n.jsx(c,{children:e})})]})}o.useAuth},7272:()=>{}};